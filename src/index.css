@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Layout vars === */
:root{
  --header-h: 68px;
  --sidebar-w: 300px;
  --input-h: 78px;
  --corner-radius: 12px;
  --transition-fast: 220ms;
  --transition-medium: 360ms;
}

/* Prevent page scrolling â€” internal scroll only */
html,body,#root {
  height:100%;
  margin:0;
  padding:0;
  overflow:hidden;
  font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background var(--transition-medium) ease, color var(--transition-medium) ease;
}

/* ---------------- Dark theme variables ---------------- */
html.dark {
  --bg-1: #08060a;
  --bg-2: #0e0b15;
  --panel-surface: rgba(255,255,255,0.03);
  --panel-surface-2: rgba(255,255,255,0.04);
  --glass-border: rgba(255,255,255,0.05);
  --text-main: #eef0f6;
  --text-muted: #adb6cf;
  --accent-1: #7c3aed;
  --accent-2: #5b21b6;
  --scroll-thumb: rgba(124,58,237,0.25);

  background: radial-gradient(1200px 600px at 80% 75%, rgba(124,58,237,0.12), transparent 15%),
              radial-gradient(800px 360px at 20% 25%, rgba(37,99,235,0.06), transparent 20%),
              linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
}

/* add aurora edges */
html.dark .app-header,
html.dark .app-sidebar {
  box-shadow: 0 0 30px rgba(124,58,237,0.12);
}

/* ================= Light theme variables ================= */
html.light {
  --bg-1: #f8e9db; /* soft beige */
  --bg-2: #ffd1b3; /* peach rose */
  --panel-surface: rgba(255, 255, 255, 0.75);
  --panel-surface-2: rgba(255, 255, 255, 0.6);
  --glass-border: rgba(0, 0, 0, 0.08);
  --text-main: #2b1f1d;
  --text-muted: #7b665e;
  --accent-1: #ff7b7b; /* coral */
  --accent-2: #f2b37d; /* soft gold */
  --bubble-bg: linear-gradient(180deg, rgba(255, 135, 135, 0.22), rgba(242, 179, 125, 0.14));
  --bubble-text: #2a1f1d;
  --scroll-thumb: rgba(255, 172, 130, 0.4);

  background: radial-gradient(1400px 600px at 85% 80%, rgba(242, 179, 125, 0.25), transparent 12%),
              radial-gradient(800px 360px at 15% 20%, rgba(255, 123, 123, 0.14), transparent 18%),
              linear-gradient(180deg, var(--bg-2) 0%, var(--bg-1) 100%);
  color: var(--text-main);
}

/* slight depth improvements */
html.light .app-header,
html.light .app-sidebar {
  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);
}

/* shared helpers: text colors (makes inline easier) */
.text-main { color: var(--text-main); }
.text-muted { color: var(--text-muted); }

/* cinematic glass */
.bg-glass {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius: var(--corner-radius);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(10px) saturate(1.12);
  box-shadow:
    0 6px 22px rgba(2,6,23,0.18),
    inset 0 1px 0 rgba(255,255,255,0.02);
  transition: all var(--transition-medium) ease;
}

/* header */
.app-header{
  height:var(--header-h);
  position:fixed; left:0; right:0; top:0;
  z-index:60;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 20px;
  border-bottom: 1px solid var(--glass-border);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  backdrop-filter: blur(8px) saturate(1.05);
}

/* sidebar */
.app-sidebar {
  width: var(--sidebar-w);
  position:fixed; left:0; top:var(--header-h);
  bottom:0;
  padding:18px;
  box-sizing:border-box;
  overflow:auto;
  z-index:50;
  border-right:1px solid var(--glass-border);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
}

/* main area */
.app-main {
  position: absolute;
  left: var(--sidebar-w);
  top: var(--header-h);
  right: 0;
  bottom: 0;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* chat body: single scrollable pane (messages only) */
.chat-body {
  flex: 1;
  overflow-y: auto;
  padding: 28px;
  box-sizing: border-box;
  position: relative;
}

/* nice inner container to constrain messages */
.messages-inner {
  max-width: 920px;
  margin: 0 auto;
}

/* input fixed area (outside the scroll) */
.chat-input-bar {
  height: var(--input-h);
  border-top: 1px solid var(--glass-border);
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.03));
  display:flex; align-items:center; padding:12px 20px;
  box-sizing:border-box;
}

/* scrollbars */
.chat-body::-webkit-scrollbar { width: 12px; }
.chat-body::-webkit-scrollbar-track { background: transparent; }
.chat-body::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb);
  border-radius: 999px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

/* bubble glow + animated pseudo element (floating & popping) */
.bubble-glow {
  position: relative;
  transition: box-shadow var(--transition-fast), transform var(--transition-fast);
}
.bubble-glow::after {
  content: "";
  position: absolute;
  inset: -8px;
  z-index: -1;
  border-radius: 14px;
  filter: blur(30px);
  opacity: 0.45;
  pointer-events: none;

  /* combined floating + subtle pop animation */
  animation: floatOrb 6s ease-in-out infinite, pulsePop 3.8s ease-in-out infinite;
  transform-origin: 50% 50%;
}

/* theme aware bubble glow colors */
html.dark .bubble-glow::after {
  background: radial-gradient(200px 80px at 70% 40%, rgba(124,58,237,0.18), rgba(99,102,241,0.06), transparent 40%);
}
html.light .bubble-glow::after {
  background: radial-gradient(200px 80px at 70% 40%, rgba(255,123,123,0.12), rgba(242,179,125,0.06), transparent 40%);
}

/* animations for the bubble glow */
@keyframes floatOrb {
  0% { transform: translateY(0px) scale(1); opacity: 0.42; }
  25% { transform: translateY(-6px) scale(1.02); opacity: 0.52; }
  50% { transform: translateY(0px) scale(1); opacity: 0.45; }
  75% { transform: translateY(6px) scale(0.99); opacity: 0.48; }
  100% { transform: translateY(0px) scale(1); opacity: 0.42; }
}

@keyframes pulsePop {
  0% { transform: scale(1); filter: blur(30px); }
  30% { transform: scale(1.03); filter: blur(28px); }
  60% { transform: scale(0.995); filter: blur(31px); }
  100% { transform: scale(1); filter: blur(30px); }
}

/* system messages style */
.system-pill {
  display:inline-block;
  padding:6px 12px;
  border-radius:999px;
  background: rgba(255,255,255,0.03);
  color: var(--text-muted);
  font-size: 12px;
  border: 1px solid var(--glass-border);
}

/* input bar inner controls */
.inputbar-shell {
  width:100%;
  display:flex;
  gap:12px;
  align-items:center;
}

/* file button circle */
.input-file-btn {
  width:44px; height:44px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  border:1px solid var(--glass-border);
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
}

/* send button looks cinematic */
.send-btn {
  min-width: 88px;
  padding: 10px 16px;
  border-radius: 10px;
  font-weight: 700;
  border: none;
  cursor: pointer;
  color: white;
  background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
  box-shadow: 0 8px 24px rgba(0,0,0,0.18), 0 2px 10px rgba(0,0,0,0.12) inset;
  transition: transform var(--transition-fast), filter var(--transition-fast);
}
.send-btn:active { transform: translateY(1px) scale(0.996); }

/* small helpers */
.text-muted { color: var(--text-muted); }
.text-main { color: var(--text-main); }

/* background orbs used on login screen (classes used in ChatRoot) */
.bg-orb {
  position: absolute;
  border-radius: 999px;
  filter: blur(56px);
  opacity: 0.9;
  pointer-events: none;
  transform: translateZ(0);
}
html.dark .bg-orb { background: radial-gradient(circle at 30% 30%, rgba(124,58,237,0.14), transparent 25%); }
html.light .bg-orb { background: radial-gradient(circle at 30% 30%, rgba(255,123,123,0.12), transparent 25%); }
.bg-orb { animation: orbPulse 6s ease-in-out infinite; }

.orb-small {
  position: absolute;
  width: 6rem;
  height: 6rem;
  border-radius: 999px;
  filter: blur(26px);
  opacity: 0.7;
  pointer-events: none;
}
html.dark .orb-small { background: radial-gradient(circle at 30% 30%, rgba(99,102,241,0.12), transparent 25%); }
html.light .orb-small { background: radial-gradient(circle at 30% 30%, rgba(255,172,130,0.12), transparent 25%); }
.orb-small { animation: orbFloat 8s ease-in-out infinite; }

/* orb keyframes */
@keyframes orbPulse {
  0% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.07); opacity: 0.95; }
  100% { transform: scale(1); opacity: 0.8; }
}
@keyframes orbFloat {
  0% { transform: translateY(0px) scale(1); opacity: 0.7; }
  50% { transform: translateY(-18px) scale(1.06); opacity: 0.85; }
  100% { transform: translateY(0px) scale(1); opacity: 0.7; }
}

/* responsiveness */
@media (max-width: 960px) {
  .app-sidebar { display:none; width:0; }
  .app-main { left: 0; }
  .messages-inner { padding:0 10px; }
}
/* --- Improved chat bubble visuals --- */
html.dark .bubble-me {
  background: linear-gradient(135deg, #7c3aed, #5b21b6);
}

html.light .bubble-me {
  background: linear-gradient(135deg, #ff8a8a, #f2b37d);
}

html.dark .bubble-other {
  background: rgba(255, 255, 255, 0.06);
}

html.light .bubble-other {
  background: rgba(255, 255, 255, 0.65);
}

/* smoother timestamp text */
.chat-bubble-time {
  font-size: 10px;
  opacity: 0.7;
  text-align: right;
  margin-top: 2px;
}

/* refine gradient pop */
@keyframes bubblePop {
  0% { transform: scale(0.95); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}
